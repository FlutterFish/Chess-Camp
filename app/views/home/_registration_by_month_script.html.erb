<script>
var m1 = 0;
var m2 = 0;
var m3 = 0;
var m4 = 0;
var m5 = 0;
var m6 = 0;
var m7 = 0;
var m8 = 0;
var m9 = 0;
var m10 = 0;
var m11 = 0;
var m12 = 0;
<% Registration.all.each do |r| %>
	<% if r.camp.start_date.strftime("%m").to_s == "01" %>
		m1 += 1;
	<% elsif r.camp.start_date.strftime("%m").to_s == "02" %>
		m2 += 1;	
	<% elsif r.camp.start_date.strftime("%m").to_s == "03" %>
		m3 += 1;	
	<% elsif r.camp.start_date.strftime("%m").to_s == "04" %>
		m4 += 1;	
	<% elsif r.camp.start_date.strftime("%m").to_s == "05" %>
		m5 += 1;	
	<% elsif r.camp.start_date.strftime("%m").to_s == "06" %>
		m6 += 1;		
	<% elsif r.camp.start_date.strftime("%m").to_s == "07" %>
		m7 += 1;
	<% elsif r.camp.start_date.strftime("%m").to_s == "08" %>
		m8 += 1;
	<% elsif r.camp.start_date.strftime("%m").to_s == "09" %>
		m9 += 1;		
	<% elsif r.camp.start_date.strftime("%m").to_s == "10" %>
		m10 += 1;		
	<% elsif r.camp.start_date.strftime("%m").to_s == "11" %>
		m11 += 1;		
	<% elsif r.camp.start_date.strftime("%m").to_s == "12" %>
		m12 += 1;		
	<% end %>
<% end %>
$(function() {
	$('#registration-by-month-graph').highcharts({
  	chart: {
  			type: 'column'
		},

		title: {
 			text: "Registrations by Month"
 		},

 		xAxis: {
 			type: 'category',
  		labels: {
      		rotation: -45,
      		style: {
          		fontSize: '13px',
          		fontFamily: 'Verdana, sans-serif'
      		}
  		}
		},
		yAxis: {
  		min: 0,
  		title: {
      		text: 'Number Registered'
  		}
		},

		tooltip: {
  		pointFormat: 'Students Registered This Month: <b>{point.y:.f} students</b>'
		},

		plotOptions: {
 				pie: {
      			allowPointSelect: true,
      			cursor: 'pointer',
      			dataLabels: {
          			enabled: true,
          			format: '<b>{point.name}</b>: {point.percentage:.1f} %',
          			style: {
              		color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
          			}
      				}
  				}
		},

 		series: [{
  		name: 'Months',
  		colorByPoint: true,

  		data: [{
      		name: 'Jan',
      		y: m1,
      		selected: true
  			}, {
      		name: 'Feb',
      		y: m2
  			}, {
      		name: 'Mar',
      		y: m3
  			}, {
      		name: 'Apr',
      		y: m4
  			}, {
      		name: 'May',
      		y: m5
  			}, {
      		name: 'Jun',
      		y: m6
  			}, {
      		name: 'Jul',
      		y: m7
  			}, {
      		name: 'Aug',
      		y: m8
  			}, {
      		name: 'Sep',
      		y: m9
  			}, {
      		name: 'Oct',
      		y: m10
  			}, {
      		name: 'Nov',
      		y: m11
  			}, {
      		name: 'Dec',
      		y: m12
  			}]
		}]	
	});
});
</script>